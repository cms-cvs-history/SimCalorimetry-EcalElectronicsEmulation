process EcalSimRawData = 
{
  include "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis_with_unsuppressed_barrelOnly.cff"
	
  # input
  source = PoolSource { 
     untracked vstring fileNames =
     {'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiEle-Pt35/0000/9028CBB0-A895-DB11-81A2-00E081585AD8.root'}
     untracked int32 maxEvents = 10
  }

  # output
  module out = PoolOutputModule {
     untracked string fileName = 'file:TrigPrim.root' 
     untracked vstring outputCommands = {
        "drop *_siStripElectronToTrackAssociator_*_*"
     }
  }

  #Ecal full digitization (EB+EE+ES)
  include "SimCalorimetry/EcalSimProducers/data/ecaldigi.cfi"
  replace ecalDigis.writeSrFlags = true

  #simulation of raw data. Defines the ecalSimRawData module:
  include "SimCalorimetry/EcalElectronicsEmulation/data/EcalSimRawData.cfi"

  replace ecalTriggerPrimitiveDigis.TcpOutput = true

  #switch off generation of DCC data:
  replace ecalSimRawData.tcc2dccData = false
  replace ecalSimRawData.srp2dccData = false
  replace ecalSimRawData.fe2dccData = false

  #Verbosity swicth for TCC input data generation
  replace ecalSimRawData.tpVerbose = false

  #change default value of TPG:
  replace ecalSimRawData.tccInDefaultVal = 0 

  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

  # Description of EE trigger tower map
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

  path p = { ecalUnsuppressedDigis, ecalTriggerPrimitiveDigis, ecalSimRawData }
  endpath outpath = { out }
}
