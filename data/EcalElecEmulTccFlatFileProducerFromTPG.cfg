process EcalSimRawData = {
  ###################################################################### 
  # input
  #
  source = PoolSource { 
     untracked vstring fileNames =
     {'rfio:/castor/cern.ch/cms/store/mc/2006/12/21/mc-physval-120-DiEle-Pt35/0000/9028CBB0-A895-DB11-81A2-00E081585AD8.root'}
     untracked int32 maxEvents = 10
  }
  #
  ######################################################################

  ######################################################################
  # output
  module out = PoolOutputModule {
     untracked string fileName = 'file:TrigPrim.root' 
     untracked vstring outputCommands = {
         "drop *_siStripElectronToTrackAssociator_*_*"
     }
  }
  #
  ######################################################################

  ######################################################################
  # Geometry
  #
  include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"

  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

  # Description of EE trigger tower map
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"
  #
  ######################################################################


  ######################################################################
  # Digitization
  #
  include "Configuration/StandardSequences/data/Digi.cff"
  include "Configuration/StandardSequences/data/MixingNoPileUp.cff"
 
  # TPG: defines the ecalTriggerPrimitiveDigis module
  include  "SimCalorimetry/EcalTrigPrimProducers/data/ecalTriggerPrimitiveDigis.cfi"

  # conditions
  include "Configuration/StandardSequences/data/FakeConditions.cff"
  #
  ######################################################################
 
  ######################################################################
  # Simulation of raw data.
  # 
  # Defines the ecalSimRawData module:
  include "SimCalorimetry/EcalElectronicsEmulation/data/EcalSimRawData.cfi"
  replace ecalTriggerPrimitiveDigis.Label = "ecalUnsuppressedDigis"
  replace ecalTriggerPrimitiveDigis.InstanceEB = ""
  replace ecalTriggerPrimitiveDigis.InstanceEE = ""
  replace ecalTriggerPrimitiveDigis.TcpOutput = true 
  replace ecalTriggerPrimitiveDigis.BarrelOnly = true

  #switch off generation of DCC data:
  replace ecalSimRawData.tcc2dccData = false
  replace ecalSimRawData.srp2dccData = false
  replace ecalSimRawData.fe2dccData = false

  #Verbosity swicth for TCC input data generation
  replace ecalSimRawData.tpVerbose = false

  #change default value of TPG:
  replace ecalSimRawData.tccInDefaultVal = 0 
  #
  ######################################################################

  ######################################################################
  # CMSSW Module Path
  path p = { mix, ecalUnsuppressedDigis, ecalTriggerPrimitiveDigis, ecalSimRawData }
  endpath outpath = { out }
  #
  ######################################################################
}
