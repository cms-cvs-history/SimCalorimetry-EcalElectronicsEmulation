process EcalSimRawData = 
{	
  # input
  source = EcalSimpleSource {
#number of events to generate:
      untracked int32 maxEvents = 2
#xtal channel samples:
#    pulse of 3 bx in gain 12 (ID=1, see 1<<12):
      string formula = "200+(4<=isample0)*(isample0<=6)*16*(1.)+1<<12"
#TT samples:
#  TT sample format:
#        |11-9 |  8 |    7 - 0    |
#        | TTF |fgvb|compressed Et|
# 'S' every 3 TTs, 'C' every 7 TTs, events shifted by 1 TTs,
# energy set to TT id in first event and then incremented at each event:
       string tpFormula = "itt0+ievt0 + max(((ieta0*72+iphi0+1+ievt0)%7==0)*3,((ieta0*72+iphi0+1+ievt0)%3==0)*1)<<9"
       untracked bool verbose = false 
  }

  #simulation of raw data:
  module ecalSimRawData = EcalSimRawData{
      string digiProducer = "source"
      string EBdigiCollection = ""
      string EEdigiCollection = ""
      string EBSRPdigiCollection = ""
      string EESRPdigiCollection = ""
      string trigPrimProducer = "source"
      string tpdigiCollection = ""
      string writeMode = "ascii"
      untracked bool tpVerbose = false
      untracked bool xtalVerbose = false
      int32 deltaEta = 1
      int32 deltaPhi = 1
      double srpLowTowerThreshold = 2.5
      double srpHighTowerThreshold = 5.
      untracked int32 dccNum = 28
      untracked int32 tccNum = 55      	
   }
   # Geometry
   #
   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"

   # Calo geometry service model
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

   # Description of EE trigger tower map
   include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

   path p = { ecalSimRawData }
}
