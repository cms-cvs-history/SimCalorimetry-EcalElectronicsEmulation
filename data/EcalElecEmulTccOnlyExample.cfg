process EcalSimRawData = 
{	
  # input
  source = EcalSimpleSource {
#number of events to generate:
      untracked int32 maxEvents = 2
#      string formula = "200+(4<=isample0)*(isample0<=6)*16*(1.)+1<<12"
      string formula = ""
#TT samples:
#  TT sample format:
#        |11 | 10 |    9 - 0    |
#        |gap|fgvb|      Et     |
# energy set to TT id in first event and then incremented at each event:
      string tpFormula = "itt0+ievt0"
      untracked bool verbose = false 
  }

  #simulation of raw data. Defines the ecalSimRawData module:
  include "SimCalorimetry/EcalElectronicsEmulation/data/EcalSimRawData.cfi"

  #replace required because of use of digis issued from EcalSimpleSource 
  #instead of standard digis:
  replace ecalSimRawData.trigPrimProducer = "source"
  replace ecalSimRawData.tcpDigiCollection = ""

  #switch off generation of DCC data:
  replace ecalSimRawData.tcc2dccData = false
  replace ecalSimRawData.srp2dccData = false
  replace ecalSimRawData.fe2dccData = false

  #verbosity switch for generation of TCC input data:
  replace ecalSimRawData.tpVerbose = false

  # Geometry
  #
  include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"

  # Calo geometry service model
  include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

  # Description of EE trigger tower map
  include "Geometry/CaloEventSetup/data/EcalTrigTowerConstituents.cfi"

  path p = { ecalSimRawData }
}
